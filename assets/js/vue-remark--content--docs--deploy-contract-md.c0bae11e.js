(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{BtOJ:function(e,t,a){"use strict";a.r(t);var o=a("KHd+"),r=a("UQSp"),n=a("Kw5r");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.a.config.optionMergeStrategies;var p={VueRemarkRoot:r.a},c=function(e){var t=e.options.components=e.options.components||{},a=e.options.computed=e.options.computed||{};Object.keys(p).forEach((function(e){"object"===s(p[e])&&"function"==typeof p[e].render?t[e]=p[e]:a[e]=function(){return p[e]}}))},l=n.a.config.optionMergeStrategies,i="__vueRemarkFrontMatter",d={excerpt:null,title:"Deploy a Rholang contract"};var v=function(e){e.options[i]&&(e.options[i]=d),n.a.util.defineReactive(e.options,i,d),e.options.computed=l.computed({$frontmatter:function(){return e.options[i]}},e.options.computed)},b=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("VueRemarkRoot",[a("h1",{attrs:{id:"deploy-a-rholang-contract"}},[a("a",{attrs:{href:"#deploy-a-rholang-contract","aria-hidden":"true"}},[e._v("#")]),e._v("Deploy a Rholang contract")]),a("p",[e._v("Deploy a Rholang source file to a validator on an existing running node. The deploy will be packaged and sent as a block to the network depending on the configuration of the validator instance.")]),a("h2",{attrs:{id:"deploy-commands"}},[a("a",{attrs:{href:"#deploy-commands","aria-hidden":"true"}},[e._v("#")]),e._v("Deploy commands")]),a("p",[e._v("The deploy command requires the following specifications in addition to the Rholang file:")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("rnode --grpc-host "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("address of known validator"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" deploy --phlo-limit "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --phlo-price "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --private-key-path "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("path to encrypted private ke"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("path to .rho file"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --valid-after-block-number "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("valid-after-block"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")])])]),a("ul",[a("li",[a("code",{pre:!0},[e._v("--phlo-limit <arg>")]),e._v(" The amount of phlo to use for the\ntransaction (unused phlo is refunded).\nMust be positive integer.")]),a("li",[a("code",{pre:!0},[e._v("--phlo-price <arg>")]),e._v(" The price of phlo for this transaction\nin units dust/phlo. Must be positive\ninteger.")]),a("li",[a("code",{pre:!0},[e._v("--private-key-path <arg>")]),e._v(" The deployer's file with encrypted\nprivate key.")]),a("li",[a("code",{pre:!0},[e._v("--valid-after-block-number <arg>")]),e._v(" At what block height your code will be active.\nLook this up with the command: "),a("code",{pre:!0},[e._v("./rnode show-blocks")]),e._v("\nDeploy a Rholang contract to a known validator\nUnless you are a validator in the RChain network or a private network, you will typically deploy Rholang to a known validator with the intent to add the contract to the blockchain.")])]),a("p",[e._v("Example:")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("./rnode --grpc-host node0.sandboxnet.rchain-dev.tk deploy --phlo-limit "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("10000000000")]),e._v(" --phlo-price "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" --private-key 0110a3b8e9de821cdb305785fed2a19f36413577b2cd4452736ddacbe0656bba 500getbal.rho --valid-after-block-number "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("250984")])])]),a("blockquote",[a("p",[e._v("Please make shure that the --phlo-limit is not to low. Additionally put the right "),a("code",{pre:!0},[e._v("<valid-after-block>")]),e._v(" in (look it up with the command ./rnode show-blocks).")])]),a("h2",{attrs:{id:"storage-cost"}},[a("a",{attrs:{href:"#storage-cost","aria-hidden":"true"}},[e._v("#")]),e._v("Storage Cost")]),a("p",[e._v("The current cost for file store on the Rchain Mainnet is the following:")]),a("p",[e._v("0,00004899 REV / KB cost")]),a("p",[e._v("Which means you could deploy 20,4 MB with one REV.")]),a("p",[e._v("The cost is measured in 10E-9 REV (10 nanoREV).")]),a("h2",{attrs:{id:"deploy-a-rholang-contract-to-a-known-validator-in-docker"}},[a("a",{attrs:{href:"#deploy-a-rholang-contract-to-a-known-validator-in-docker","aria-hidden":"true"}},[e._v("#")]),e._v("Deploy a Rholang contract to a known validator in Docker")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("docker run -it --rm --name rnode -v /data/rhoc-daemon-01:/var/lib/rnode rchain/rnode:latest run --bootstrap "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("bootstrap ID"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --network-id "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("network"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --grpc-host "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("address of known validator"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" deploy --from "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"0x1"')]),e._v(" --phlo-limit "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --phlo-price "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --private-key-path "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("path to encrypted private key"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("path to Rholang file"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")])])]),a("h2",{attrs:{id:"deploy-returns-a-deployid"}},[a("a",{attrs:{href:"#deploy-returns-a-deployid","aria-hidden":"true"}},[e._v("#")]),e._v("Deploy returns a DeployID")]),a("p",[e._v("A successful deploy returns a DeployID. You can use this ID to locate your deploy in a proposed block.")]),a("p",[e._v("For example:")]),a("p",[e._v("Here is a deploy made from an observer node to a validating node on a testnet:")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("root@kelly:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# rnode --grpc-host node0.sandboxnet.rchain-dev.tk deploy --phlo-price 10000000000 --phlo-limit 1 --private-key-path /keys tut-philosophers.rho --valid-after-block-number 250984")]),e._v("\nPassword "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("for")]),e._v(" private key file: ******\nResponse: Success"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v("\nDeployId is: 3045022100bbabe879eed9194ef371f312b0fa36d402409111d307a1cb01cc8c519fdb741502206051ecfcd79aad31764ab7b65ceec4c537489ea7359fc8f80472e74c819b4cb1")])]),a("p",[e._v("Once we hav the DeployID, we can locate the block containing that deploy.")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("root@kelly:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# rnode --grpc-host node0.sandboxnet.rchain-dev.tk find-deploy --deploy-id 3045022100bbabe879eed9194ef371f312b0fa36d402409111d307a1cb01cc8c519fdb741502206051ecfcd79aad31764ab7b65ceec4c537489ea7359fc8f80472e74c819b4cb1")]),e._v("\nblockInfo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\nblockHash: "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"2b7848babd7ea4bee52bd7e9990a5119a98b9482ac28e5e9b181bbf1a480d8bf"')]),e._v("\nblockSize: "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"35679"')]),e._v("\nblockNumber: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("315")]),e._v("\nversion: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\ndeployCount: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\ntupleSpaceHash: "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"d7aa5b8e0a9a6bf1bbfd3f19715ad08996b5fdde8eb64200763a742d1f348ea7"')]),e._v("\ntimestamp: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1560208996576")]),e._v("\nfaultTolerance: -1.0\nmainParentHash: "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"fb17569ab340486e2bcfb33910a87ea30f598288af2c420397f055f03b2687ec"')]),e._v("\nparentsHashList: "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"fb17569ab340486e2bcfb33910a87ea30f598288af2c420397f055f03b2687ec"')]),e._v("\nparentsHashList: "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"9100f449f0fa3501fc058eb78534545f27d79503366078033c33625636391604"')]),e._v("\nsender: "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"0443a5170db3ec242341864617f752a0e54d34213793b96c5708db72ce62a75e1a37af8f1dcb93b208fe807f408a30f6acd343330a5d27b3434c759ac5d231679f"')])])]),a("p",[e._v("If the deploy has not yet been proposed in a block, you will receive the following:")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("Couldn't "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("find")]),e._v(" block containing deploy with id:3045022100bbabe879eed9194ef371f312b0fa36d402409111d307a1cb01cc8c519fdb741502206051ecfcd79aad31764ab7b65ceec4c537489ea7359fc8f80472e74c819b4cb1")])])])}),[],!1,null,null,null);"function"==typeof c&&c(b),"function"==typeof v&&v(b);t.default=b.exports},UQSp:function(e,t,a){"use strict";t.a={name:"VueRemarkRoot",render:function(e){return e("div",null,this.$slots.default)}}}}]);