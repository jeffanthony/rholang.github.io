{"hash":"261991b4937a3509149c0b428534a2fe16d2c172","data":{"post":{"title":"Why block merge matters and how RChain is solving the scalability problem.","date":"13. February 2021","timeToRead":7,"content":"<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 650 488' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-b077ae5be4b97d33de9a89c9dc48addf'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-b077ae5be4b97d33de9a89c9dc48addf)' width='650' height='488' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAwAEADASIAAhEBAxEB/8QAGwAAAwADAQEAAAAAAAAAAAAAAAMEAgUGBwj/xAAwEAABAwMDAQQJBQAAAAAAAAABAgMRAAQSBSExExRCUWEGByIkMkFxcqEVNDWBov/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oADAMBAAIRAxEAPwD6poopF/cdksri4wK%2bk2pzEcmATH4oH0V59pnrNs7hnO80%2b5Z2BHSPVBnw4k8bCTztCSa2tn6cWVyzqLibS79zLXspCVdUOQAUEHFUEwSCQI53ig6yiuKT6xtLU6poWWp9RKc1J6A9kQSZOUcJJnj5cyKxb9ZGlLbcc7Le9JKsMwlGM77FWUD4VbzjtzvQdvRU%2bn3bd/YW12xl0rhtLqMhBxUARP8ARqigKTdl8ME2iW1OyIDhIETvx5U6ig1KXtYDTZVYWRXvkkXJATvtBx32oQ/rOEmxsgrKAkXKojbecflvW2qF959Dr6UFsjEYT3T5%2bVTRKpzVXRg7p9ippYKVhVwTIjiMdxyIqRbOoqs%2bwjRdK7FgE9FT0ojwxwiJrZsvXK7i2BU2lGJ6g5KjHd8q2FUJsuoLVsPNNtLjdtsylPkKdRRQFFFYPt9VpSAtbZPeQYI%2blBnUtywnF5xtvJxSSFAd8eFLVYLOXv14JjhSdv8ANCbBxI/f3h%2bqk%2bH21LNDLa3RDLrjeLiEAJB7g8KqqA6esoSnt96CBE5pk%2bfw0fp65/kL35d5Ph9tUX0Uq3aLKCkuuO7zKyCfwKbQf//Z' /%3e%3c/svg%3e\" width=\"650\" alt=\"merge1\" data-srcset=\"/assets/static/merge-1.2f2d982.d0689533e1a9249fa2b620790da3e750.jpg 650w\" data-sizes=\"(max-width: 650px) 100vw, 650px\" data-src=\"/assets/static/merge-1.2f2d982.d0689533e1a9249fa2b620790da3e750.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/merge-1.2f2d982.d0689533e1a9249fa2b620790da3e750.jpg\" width=\"650\" alt=\"merge1\"></noscript></p>\n<p>This article aims to explain how RChain can reach horizontal scalability, targeting one of the key ingredients of RChain platform - block merge.\nSome preliminary results of implementation analysis are included in the end.</p>\n<p>Blockchain is effectively a computer, replicated across a number of nodes.\nTwo basic offerings are cryptographic proof of state transition + economic incentive for making sure one cheating is going to be punished.</p>\n<p><strong><em><div style=\"font-size:larger; text-align:center\">This article is targeting the first part of the equation - state transition.</div></em></strong></p>\n<p>Early incarnation of blockchain application as cryptocurrencies gave birth to a notion of public ledger. This public ledger contains, in the simplest case, a list of balances.  But just a list is not a good model for such a ledger, so usually more sophisticated models are used, like <a href=\"https://en.wikipedia.org/wiki/Unspent_transaction_output\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">UTXO</a> for Bitcoin and some others.</p>\n<p>Ethereum developed a state model (<a href=\"https://ethereum.org/en/developers/docs/evm/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">EVM</a>) that allows storing turing complete state machines, thus enabling executing arbitrary smart contracts.</p>\n<p>Entities that are allowed to introduce changes to the state, changing balances, making transactions, invoking smart contracts - are miners, or validators of the network.\nIn case of PoS networks, once some state change is introduced, it should be verified by other validators, and the Sword of Damocles should punish thee daring cheating (or, in simple words, the cheater will lose its stake).</p>\n<p>This is the basic principle of most chains.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 650 488' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-567c39b538311e5e336f1774df9d4950'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-567c39b538311e5e336f1774df9d4950)' width='650' height='488' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAwAEADASIAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAAAAUEBgEHCAID/8QALRAAAgEDAwIFAwQDAAAAAAAAAQIDAAQRBRIhBjEHExRBUSJhcRUyc4Gx0fD/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/EABgRAQEBAQEAAAAAAAAAAAAAAAABMREh/9oADAMBAAIRAxEAPwDqmig0vurq8V4vS2oljZgCxbHHucUt4Xwh1zrvTtF1yTT76G4URqhacBSg3c/OeBk/1WZPEDQ43hDzTKsk3p2YxEBJMElT9xjn8irK9layTmeS3haYjaZDGC2PjOM4qPPY2tvbs9tpsEsioFWNERSQOy5PAAyaBBJ4haHCZfUyXECJsId4Th9wB4/AYE/Y5phofVNnrc6x6dFcyjGZJNmEj74ySRnJVgMZ5U1kxIYzEem8xK30riDB%2b4G6vvb3E8KZj0OaIk4Kq8I4554b/s0DeiolrdXE05SWwngjAJ8x3QgnPbCsTUugDSwteKsYto4zDn6TnnH3HYf1TM0qdb9hCbN4RBuHDA528%2b/b4qXEuGoqPqF5b6fZT3d7KsNtCheSRuyqO5qQKh6xEk%2bl3UMjBUkjKMSu4AHjtVVSp%2bstHUs1t1UzYXcRLGFAXvkHyjmiHrTSrl44m6mEZx%2b6AeYzn4wYcfNc0XutX/VvinqCQ3VumjdPz%2betlPKlvJdrC4Q7FY7Wc4JCkgYGPety3HXmhC08zSYZ9QbG7MekqignvksQR3x2oNvdP6paajbutnfNetCcPI0ew85IyMAdvge1Nao/hXqv61pt3evbpaTO4BtxA0bIoztLHsSeT9OQBirxQeJmZY2ZELsOyg4zSmJb%2b6iilhlWCLcCIz9R2/kf64pvLGssbI43KwwR81Al01lWJLOZreNX3lByDUuJcMRWHYKhLHAHc1kUVVaQ8PuntS0fxS6k6j1DTPIstf8ANYW4UN6YpKArO2cZkXc5x2zir34gyxah0Rq1nZxGe5uLdxFHCNxZwMjHt7CrVeWS3WMzXEX8MpT/ABUdtIQyI/q78bTu2i5YA855HuPbHxQI/Cp5I%2bhNEsbmGeG7s7KGKZJkKkMFx79%2b1W6iig//2Q==' /%3e%3c/svg%3e\" width=\"650\" alt=\"merge2\" data-srcset=\"/assets/static/merge-2.2f2d982.02edda7447db3b5c35230896116bb36e.jpg 650w\" data-sizes=\"(max-width: 650px) 100vw, 650px\" data-src=\"/assets/static/merge-2.2f2d982.02edda7447db3b5c35230896116bb36e.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/merge-2.2f2d982.02edda7447db3b5c35230896116bb36e.jpg\" width=\"650\" alt=\"merge2\"></noscript></p>\n<p><strong><em><div style=\"font-size:larger; text-align:center\">But what if some miners of the network make two state transitions at the same time?</div></em></strong></p>\n<p> <a href=\"https://en.wikipedia.org/wiki/Proof_of_work\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">PoW</a> systems solve this by the longest chain rule - state transitions are stacked upon each other in order at which miners produce proof of work, and in the end the longest chain wins. There can be, and will be orphans, so miners doing useless work is a part of the protocol. <a href=\"https://en.wikipedia.org/wiki/Proof_of_stake\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">PoS</a> chains mostly suggest slots for blocks, and the more stake miner has the more blocks it is allowed to create, thus collecting more rewards.</p>\n<p>As it can be seen, this basic principle of a blockchain assumes that all state transitions happen one by one, and verified one by one. This leads to seeking scaling opportunities in running parallel chains or making some computations off chain and committing the result of a batch at once.\nWhy is this, one might ask? Why not have a nice graph, or hypergraph, or hypergraph of hypergraphs? And include all state transitions that have been done by all validators, eliminating orphans at all?</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 650 488' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-84e9b19349f0edec263e7679ee19b487'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-84e9b19349f0edec263e7679ee19b487)' width='650' height='488' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAwAEADASIAAhEBAxEB/8QAHAAAAgMBAAMAAAAAAAAAAAAABAYABQcDAQII/8QANRAAAgECAwYEAwYHAAAAAAAAAQIDBBEABSEGEhMiMUEHUWGRMkKBFBUjcaHBJDNSVWKx0v/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD6pxMCzvKq3R7ElgOTe6A9u/TCzmO0VfSMBeH5fipZeh87ftfAOGFjaLbKhyHMXpq2GbcSFZWlUra7CQqtibknhML2sCRf0XZPEyCnRRO9E8mlxFJID115WS4xW1vilkclSsvBpzUKthI6iRgAb2HKDa/r1wDps9tnQZ7Xx09IkiiWIujOygllVGdd29%2bXiKL9Lg/VnxjyeKuTQ1T1HCo45fgJChHYXv1NjY/XB7eLVFO6LRxkb19WZXPsp0HqTgNSxMZ3l/iEK6YLE1KFuoOpbqPTprhuyOvmrolllPKwFhwinY%2bZv28hgCqkb0YBFwS%2bm7vX0PbvjDdqqudRWRvxVUlgEYCK4t/TvFWB8wbegxucycQKnLzM45hcdD2xnWfbIRJHUIlVGXd7kQ0sQtfqSCwH7nAYZmOZyAJEtYVitqv2xCO3Xlvf9PPFa1S87MJZDKFuVViW%2bX0IHfGmZhsfIXj4M1RKALErNTRjsBrqfpilm8P6yYuqUu8xA/mzo1xu9wot6X/bXAJFPM0MZAV05r2RlQXt/kCfbBtNVKZafjqGIYH8RoTb2H64ZYvDrN/kytbAjmATpbub6a4sqLw%2bz9REooJ4rkabqafQA%2b/tgA9nZY5KwEtE2kY3rI99D3AHsB6Y3Hw3hEOSxAQCHXoKbg3%2bLtvEn664QMl2QziGtQ1FDXndVRvEQG1h0ve4/IdsaTsTRPQ5ekb0zU%2bvRqdIr9deRiD/ALwFxU09Qzk8ksVzaE8t7%2bZ1wNHlsUcpdcpogXN2sFuD3N93XFxiYCsSCVIxGtHCqrYghgL2N%2bltMdQ1UG3/ALMl7bu7xf1vbBNTEZ4WjWWSEm3PGRvDX1BGAvuyb%2b65h084/wDjAdCKkq8fBXdYk73E8zfpbHlmqiyuKZN5bgDi9b%2btscGyqYhR97ZiLWuQY9fz5MH0sTQQhHmkmIvzyW3j7ADAcFaqDt/DpZyCTxPh0A8tce1Nx/w1liVFQdQ976W8sFYmA//Z' /%3e%3c/svg%3e\" width=\"650\" alt=\"merge3\" data-srcset=\"/assets/static/merge-3.2f2d982.7a6b96ea2907cb9a635f397fdbb2524b.jpg 650w\" data-sizes=\"(max-width: 650px) 100vw, 650px\" data-src=\"/assets/static/merge-3.2f2d982.7a6b96ea2907cb9a635f397fdbb2524b.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/merge-3.2f2d982.7a6b96ea2907cb9a635f397fdbb2524b.jpg\" width=\"650\" alt=\"merge3\"></noscript></p>\n<p>Here's the problem - when some miner creates a new state transition (new block), it has to use some state as a base to work with, some state that has been already proven by the network to be valid. (e.g. one that says that the author of the article owns all BTCs). And if you have not a chain, but DAG (directed acyclic graph), you have several possible base states to work with. Let us have 4 validators proposed 4 blocks with the following transactions:</p>\n<p><code>tx1: Alice bought a toy train</code><br/>\n<code>tx2: Bob bought a ticket to the cinema</code><br/>\n<code>tx3: Carol bought the same toy train that Alice did</code><br/>\n<code>tx4: Dave moved all his funds to DeFi contract with open exploit</code></p>\n<p>Ok, so miner A sees all these transitions and tries to create a new state transition, willing to have all these 4 changes included into the final state which it will offer to peers for verification.\nHere the question arises - how miner A can be sure that tx1 tx2 tx3 and tx4 do not call a double spend (and here tx1 and tx3 actually call a double spend)? RChain stands on a point that if you don't have a computational model that has an intrinsic concurrency model - you cannot detect that double spend. Of course, one is able to create some extensions over the smart contracting language to track some special cases, e.g. have some very strict model for token transfers and check if token transfers do not interfere. But - this is a not scalable solution and quite fast stack up limitations. Also, it's an error prone because no one guarantees that this will be a secure solution.</p>\n<p><strong><em><div style=\"font-size:larger; text-align:center\">And here is what block merge does in RChain.</div></em></strong> Thanks to <a href=\"https://en.wikipedia.org/wiki/Rho_calculus\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">rho-calculus</a> as the foundation for computing language (Rholang) - conflict detection is provided straight out of the box. So miner A easily can detect which state transitions cannot be combined and disqualify such, so mark <code>tx3</code> as conflicting and removed from the state it is about to create. Then Carol can check the on-chain state and see that her transaction has been rejected and she has to resubmit it. Worth mentioning, that this conflict resolution happens not on block level - but on user deploys level. To understand this more deeply, let's take a look how RChain represents the state of a virtual machine.</p>\n<p>All computations in Rholang are expressed as sends and receives on some channel, as it is a process calculi language. So, roughly speaking, all that is stored - is data pieces that are available on a channel, and continuations that are available on a channel (this is basically code that waits to be executed once data comes in). If at some point data and continuation match - comm event happens, which is a basic compute event. All this beauty is stored in a RSpace -  a flavour of <a href=\"https://en.wikipedia.org/wiki/Tuple_space\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Gelernter’s tuple space</a>, which is a storage unit. As a side note, the outcome of this storage model is that RChain offers <strong><em><span style=\"font-size:larger\">transactional data storage</span></em></strong>.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 650 488' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e8a9822c538413dc3c6ea341aa302057'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e8a9822c538413dc3c6ea341aa302057)' width='650' height='488' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAwAEADASIAAhEBAxEB/8QAGwAAAQUBAQAAAAAAAAAAAAAABwADBAYIBQH/xAA5EAABAgQDBQMHDQAAAAAAAAABAgMABAURBhIhBwgTMUFRdbMiIzY3caGiFBgkJUJTYYGCksLS8P/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/EABYRAQEBAAAAAAAAAAAAAAAAAAARAf/aAAwDAQACEQMRAD8A1TChRQtsuNJzA2GJapU9uVcddm0y5EyhakgFC1ckkG/kiAvsVaq42kKVXV02cZmEFOQcUZSkkgE6XvYAi/t5ai4NTt%2bxOWgsyNCHkhVuG7/eIzm2yvvredfoeHVqNkqWqWWorSNRc5/cYRKPlFx1RaxUGZKTde47xPCC2SAsBAUTfpzI1tqDFojLDO3Guy5S41Q8OtKbuAUy6wU9CAQuHHd4nEbZR9AoigrrwXhb44Ra1HCgd7FMcz%2bPMPz0/U2JRhxia4CRLBQSRkSrXMSb3MESAUBbev8AV1I95t%2bG5BpgLb1/q6ke82/DcgMqoK2QoJJ8q10p5KH4xKcqKnXELVLglHI5lQ9SnnXEOhbji8oQlIKzoNdOY/3ZE1wFKcuUIAKk5eISix1Ivm0is1wZiYcdWoqJCTcBJ1sOz3wzHWqTSFAKAUVEm1hdR666mOUpCkWzpKSe0Whq41Rul%2bhFX7xPhIg4wDt0v0Iq/eJ8JEHGIpQP9teCp/HeFGKXS35Zh9ubRMZphSgmwSoW0BP2oIEKAyoN3bFySclWoyL2uEOugafoj35u%2bMNfrmk66nzz2vwRp2fRUFONmQelW0C%2bcPNKWT7CFC3WIwbreTWYp2a33Dlr/vgM2Dd5xiFAitUoEcjx3tPghte7ni1ZuurUZR7S66f4RqeUD4YSJtTS3upaSUp/IEk%2b%2bG5RM6l575W5LraJ82G21JUBfqSSDpblaAoexDA1RwFh2ekKtMSj7r82X0qliopCciU2OYDW4MEaFCgP/9k=' /%3e%3c/svg%3e\" width=\"650\" alt=\"merge4\" data-srcset=\"/assets/static/merge-4.2f2d982.6b91eb57baee1b7fe0991db814e455a4.jpg 650w\" data-sizes=\"(max-width: 650px) 100vw, 650px\" data-src=\"/assets/static/merge-4.2f2d982.6b91eb57baee1b7fe0991db814e455a4.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/merge-4.2f2d982.6b91eb57baee1b7fe0991db814e455a4.jpg\" width=\"650\" alt=\"merge4\"></noscript></p>\n<p>There is one basic constraint on a RSpace - if one looks at it, there should not be any possible comm events at any time. When some state transition happens, if any comm occurs - all continuations are invoked till the point when RSpace does not have any more potential comm's left. That's why, if miner A sees <code>tx1</code>, <code>tx2</code>, <code>tx3</code> and <code>tx4</code>, the logic of conflict detection simply boils down to checking if changes produced by these transactions, added to RSpace, lead to potential comm events. If no - changes made by these tx’s can be put into RSpace without any code execution. And, which is important - this conflict resolution is built-in on a computational model level. So it is available for all user code ever going to be written, and - with mathematical proof of correctness.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 650 488' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-50bbf11691047c3886449079b7fe20d6'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-50bbf11691047c3886449079b7fe20d6)' width='650' height='488' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAwAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAUCAwQBBgj/xAAtEAACAQMDAgQGAgMAAAAAAAABAgMABBEFEiExUQYTQWEUFSJxgZEHMiNSYv/EABcBAQEBAQAAAAAAAAAAAAAAAAABAgP/xAAbEQADAQEBAQEAAAAAAAAAAAAAAQIRA0ESMf/aAAwDAQACEQMRAD8A%2bqaw63qKaVp0l3KjSBWRAqkAlnYKoyeAMsOT0rdUJoo54nimRZI3G1lYZBHYg0B5i38daNLdx2byul4WRWjVfMCFjjl1yuAcAkHHNSPjvw%2bNRNiLxjdicWzRiFyVkzjB445B/R7Gn0enWUT747S3R8AbliUHAxgdPYfqsEhl8%2bU/Ig%2b2Tcsm%2bL6yCcNycg85555NALrrx9oNpcSQ3FxPGySGLJt3wzA4O045xz%2bBUV/kDQWmgiE1x5s5AhU27gyE46cf9L17imtujXMirdaKsSlslnMb49QePcD81fHoumx38t6llbi6kCBpNgJ%2bj%2bv2x7UB3Q9Q%2ba6ZFd/Dy2%2b8sPLkIJGGIzkEgg4yD6jFb6z2EnmQZWERICQgHQjuK0VE9WlawKKKKpCu4njto98zbUzjOPWvP6tqGkX8MJOopHuO5XBcZAz/AKkYpveX4iZ4rcRy3C9Y2k2Y4yOcfb90nm1gyrFMbdckdFvto6%2b3B9OvfFAS0y%2b0vTDOJdRWSZzuckvj8AlsevSmxmGo2RfTrhcFsb8ZHB5FJ4NXaCSUi3jBcbjuv9/PYA9Oo6Uz0zVo7zCSGKOck4jSUSZHfIH3oDW0c3xELJKFhUEMm3%2b3auwJMs0zSyh42P0KBjaKuoqYTAoooqlCkPji41G08N3cukRF7gIclWw6D1ZRg5I7U%2brLfWKXmzfLcR7M48mZo8574PNdOVrnatrc8Ofbm%2bnOoTzV%2brwzeG5b2fRLSTVIRDdNGNybtx6dTwOT1I9M0zqiztVtVcLLNIGbd/lkL49hn0q%2bs3X1TpLNLzlxKlvc9Ciiismz/9k=' /%3e%3c/svg%3e\" width=\"650\" alt=\"merge5\" data-srcset=\"/assets/static/merge-5.2f2d982.4ec8090c7c85dd9985505115cbaf2255.jpg 650w\" data-sizes=\"(max-width: 650px) 100vw, 650px\" data-src=\"/assets/static/merge-5.2f2d982.4ec8090c7c85dd9985505115cbaf2255.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/merge-5.2f2d982.4ec8090c7c85dd9985505115cbaf2255.jpg\" width=\"650\" alt=\"merge5\"></noscript></p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 650 488' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-1c8470aba4364418c7a819fd89e3e430'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-1c8470aba4364418c7a819fd89e3e430)' width='650' height='488' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAwAEADASIAAhEBAxEB/8QAGwAAAgIDAQAAAAAAAAAAAAAAAgQAAwEFBgj/xAAuEAABAwMCAwgBBQEAAAAAAAABAgMRAAQSBSETQWEGFBUiMVFxkTIHJEKBkmL/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/xAAaEQEBAQEAAwAAAAAAAAAAAAAAAREhEjHB/9oADAMBAAIRAxEAPwD1TSOt6ijStOcu3UKcCVIQEpIBKlqCUiTsBKhufSnqB5pt9pbTyEuNrGKkqEgj2INBzFv260Z27bs1urReFSEqbSniBBUY3WmUwDAJBjeiPbvs%2bNRNiLxRuw%2bLZTYZWSlyYg7bbg/R9jW%2bb06yaXm3aW6FwBklpIMCIHp0H1RmztivM27JXkFzwxOQmD87nfrQc5ddvtBtLhxm4uH21IcLUm3XClAwcTG8b/0KFP6gaCp5hoPXHFfIDKTbrBcJj02/6T6%2b4rpF2Vq5Odsyred2wd5mfT3pdvRdNbv3b1Flbi6cCApzAE%2bT8fiOlBnQ9Q8V0xq77u7b5lQ4bhBIhREyCQQYkHmIp%2bk9PukOhTaW%2bEEGEiIBHKKcqS7NWzEqVKpurZu5SkO8SEkkYOKRyjkRVRdSGqWLL6FvLZeddQ2pKUNPKbKgeWygJ6mqV6XYZNsrcuAuPKnvjoJH%2bt6MaLZgqI715hif3bvp/qhhq0tGrbMtBwFwgqC3FL36STH9UV4266wUW7gbWSPMRO3OlPBbPAI/dAdLp2fvLrVDuk6ahbaHHblKyMUjvroJ6/luetSmbyH3LdxVw0pLiQyEwtGP5e1FbtvIddLrubZIwTG6R886zaWzdqyGmeJiDPncUs/aiTV1MTErC8sFYRlG0%2bk1mpVVqCb4LSNV8M7r/KMpJjlO1JoGtC4X4eq37ttgHkrjrMmfraugLLZd4pQniRGUbx80dJxq2ZPfxowdV4p8RU2ljeO6hR%2bJP5fVFaJvRZqVZDTC8Y8ySsgnacj6%2b9bqqlW7Sng6W08QfyAg/dTOr5SzFomBlE84qVKlVh//2Q==' /%3e%3c/svg%3e\" width=\"650\" alt=\"merge6\" data-srcset=\"/assets/static/merge-6.2f2d982.e2e2512a95f321c36436a2e2df99ab6b.jpg 650w\" data-sizes=\"(max-width: 650px) 100vw, 650px\" data-src=\"/assets/static/merge-6.2f2d982.e2e2512a95f321c36436a2e2df99ab6b.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/merge-6.2f2d982.e2e2512a95f321c36436a2e2df99ab6b.jpg\" width=\"650\" alt=\"merge6\"></noscript></p>\n<p><strong><em><div style=\"font-size:larger; text-align:center\">Now, having this knowledge, let's talk about how this brings scalability.</div></em></strong>\nGeneral understanding in blockchain space is that if you add more nodes to the network - you inevitably lower down the throughput, decentralization is not free.\nThis sounds reasonable, overhead on routing and data replication increases. But, if miners are allowed to change state in parallel, and there is a way to validate and compose these changes in an efficient way - we might reconsider this statement. So, we have two pieces that have to be enabled to make this happen: efficient validation, and efficient merging of state changes. The latter includes conflict detection and actual technical merging of changes.</p>\n<p>The great thing about RChain - validation for all state transitions can happen concurrently. RSpace is an immutable structure, it is never changed, data is only added. So, when miner A receives several blocks from miners B, C, D - all these state transitions can be validated in parallel (even if they are conflicting). In extreme cases - time spent on validation of 100 blocks should be the same as for a single block. But this is a matter of optimization, proper engineering and resources available. At the moment of writing the article this is still work in progress.</p>\n<p>Conflict detection can be done with several degrees of efficiency, trading number of conflicts for performance. The most performant way is to not analyze the content of the channel but just detect if the same channel used with different polarities in two state transitions - on one data is being put into channel, in another continuation is being put into the same channel. In general case, this should not be a common thing, because of how channels are constructed using unforgeable names (which btw enables other awesome things like <a href=\"https://en.wikipedia.org/wiki/Object-capability_model\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">object capability security discipline</a>. So it is sufficient for many (if not the most) use cases. In this case conflict detection boils down to the operation of finding the intersection of two sets. This is quite a simplistic explanation, but for one's wanting to get a more in-depth picture, feel free to join Discord and ask questions.</p>\n<p>And, the last part is the merging of state changes. This operation requires data that is inside quite a narrow scope till the last finalized block, which allows aggressive caching. But even without it, it's just reading from and writing to the database.</p>\n<p>To sum up everything being said, this article briefly explained what is <code>block merge</code> and how it is related to scalability.\nAs said in the beginning of the article, some preliminary results can be found in this gist <a href=\"https://gist.github.com/nzpr/2465db5210c817324ab7ab4f01e23f38\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://gist.github.com/nzpr/2465db5210c817324ab7ab4f01e23f38</a>.\nThe DAG below is being built, with synchrony constraint set to upper bound, so validator have to wait for all others before creating block.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 650 488' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-5ef2e18f3878d82ffc8d83606883d1e4'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-5ef2e18f3878d82ffc8d83606883d1e4)' width='650' height='488' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAwAEADASIAAhEBAxEB/8QAGgAAAgMBAQAAAAAAAAAAAAAABAUCAwYACP/EAC8QAAEDAwMDAwIFBQAAAAAAAAECAxEABCEFEhMxQVEGFHEiYRUjMpGhFyWBseH/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A9U11B6lqVvp1ut%2b55diOvG0pw9uyQT3pUj1dpi9vH7g7iAJaKevzFBP1X6mtvTaLZd2y6tt5SgVoKQEAAZMkdyB/n4ld/UP0%2bhjluLl63AH1hxhQKFYlBx%2boSn9xTRWpWF%2btAdtUvFv60chaO09JEqwavQmxc5HBZM9NqiUtkkAzGD5zQJ3vX%2bgMtIccuXQ24pSW1BlR3wJMCJ64%2baZ%2bnvUumeoDcDSny9wbd52EAbhiCevQjHii3NP09xSVOWNspSz1LKSZiM48CKvtmLdha027LbRITu2ICZxA6eAKC%2buqHKnj35j/ALFS3DcE9yJoANSN8LZ/8NTbKezHuFKCe3geJrLFesKbIeZtSNw3hpS1R8BUfxT71GuwRp9wdSvXbRnutp5TZGRmU56xWQaOluoRwalcXCgpOz8xTs/Mpx/NAwKQVA3QcCCnCkNoJmTOd1S2adyPcqrkO5xxtgHH2xXMMucs29tyK25C7VJxJjMUY2jUEpeCLBnjJVksJBGPG6goSNEDTZ9xd7AsSTIIwY6CaNaOkC4EXVxlKdsOOCevWKtSvVwlk%2bwtQsKEDdAOD3nFFtO6n7hU2ttlKd35xEdfsaAdldhwqCHniuTILjnntTOyLJI9uta0wcqUont5oZC7w2xCmWAmTkOmT9XjbRrJdLg5kIQqDhKt3j7CgG1J27atX1WFq3cu5hDjvGD07we1ZNb1%2b6g8%2bmW%2b0KTvl0Ocfx0itje2RukKR7m4ZSrrwqCT%2b8TQv4FbkIC3rxe0g/VcLzHwaDM8TZWOZIaG39SbaZycSFVali0Cngbt5tYn8sW5A6eK0idEsAsq4lHEQpxR/wBmpp0ixSlQFs1mclMxNBn0jTg01/ebkI3iVbiCnB6GMUY2qwFyZ1l8HYmJfA3DP2pz%2bH2o27bdkQZwgZxFWJtmkrKktoGAI2jEUChlVrwq26ktSpMoLwMZ8Uys%2bORxXBfTB%2borCo6d6uDCQ1sH7x95qYQAqRjBoP/Z' /%3e%3c/svg%3e\" width=\"650\" alt=\"merge7\" data-srcset=\"/assets/static/merge-7.2f2d982.e40f7b88f9b54cc27f19ef5de7a54792.jpg 650w\" data-sizes=\"(max-width: 650px) 100vw, 650px\" data-src=\"/assets/static/merge-7.2f2d982.e40f7b88f9b54cc27f19ef5de7a54792.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/merge-7.2f2d982.e40f7b88f9b54cc27f19ef5de7a54792.jpg\" width=\"650\" alt=\"merge7\"></noscript></p>\n<p>The expected result which should demonstrate linear scalability is that merging time is a linear function of number of nodes and number of blocks created by the network grows linearly with increasing number of nodes.</p>\n<p>As it can be seen, merging of state changes for 20 blocks takes about twice as for 10 blocks. Which gives some high hopes for achieving almost linear scalability for state merging.\n<strong><em><div style=\"font-size:larger; text-align:center\">Please stay tuned for next articles with more data and tests. Thank you for reading this! Come join and ask questions <a href=\"http://discord.gg/NWkQnfH\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://discord.gg/NWkQnfH</a></div> </em></strong></p>\n","author":[],"excerpt":"Horizontal scaling with RChain.","cover":{"type":"image","mimeType":"image/png","src":"/assets/static/cover.cd8820b.efae5bf6faea0ec9f28cb0131b5d2b74.png","size":{"width":1950,"height":1180},"sizes":"(max-width: 1950px) 100vw, 1950px","srcset":["/assets/static/cover.1b91758.efae5bf6faea0ec9f28cb0131b5d2b74.png 480w","/assets/static/cover.3df3210.efae5bf6faea0ec9f28cb0131b5d2b74.png 1024w","/assets/static/cover.cd8820b.efae5bf6faea0ec9f28cb0131b5d2b74.png 1950w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1950 1180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-41b3f987e6eedd854af3b0987d5ee2cb'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-41b3f987e6eedd854af3b0987d5ee2cb)' width='1950' height='1180' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAnCAYAAAC/mE48AAAACXBIWXMAABYlAAAWJQFJUiTwAAAG%2bUlEQVRo3uVa6U9TSxTn3/Lv0A9GPxiNmrhFcY/7kpioiXGJMZqocVd2RQOyRYgii/CAV8q%2b09LWLvS2pevl9%2bZ34NZ6XwsUXhF4k0xm5sw5s5x75pwzZ24eskizs7OSjbqu60lYKjwTzKhnM186%2bmzGWCzlLYfIvIBMTDHqmTaRCd/cnzpPJvxsmbssBqROpmkaenp64PV6pR0KhdLiGX3GRhZbZOqGU2HGPIt9hFVjwK5du3Dt2jXk5%2bfj5cuXePDggcD7%2bvqS%2bAMDA4jFYrh48aIwjJkpkUjAZrPB5/NhcnIyCTPqgUAAfr8f09PTAiNdWVkZ4vE4xsbGEIlEBG94eFhw/4gEbNu2DU%2bfPsWhQ4ekvHHjBu7fvy8MefbsmcBYf/PmDY4fP44zZ86gqalJaB89eoTDhw9j3759OHLkCJ48eYJ79%2b5hx44dUt%2b9ezdu3ryJq1ev4tixY7hy5YrQsM0xr1%2b/jufPn%2bPcuXPYs2cP3G736jHAKLdu3Yr6%2bnqcP38ep0%2bfloWeOHECMzMz0rdz506Ew2F0dnZiy5Yt2LRpEyYmJoT%2b8uXLaGhoSJZ79%2b7F9u3bZfMc5%2bzZszL2rVu30NLSIoziZo8ezUd/f78wgRJI6Thw4EBSctIdn5xJwIULF2QDPAbv379HcXExXr9%2bjYMHD6KyshLl5eXYv3%2b/wN%2b%2bfYuqqio8fPhQaNlub2/Hq1ev0NzcjHfv3skx4iZJSwmi2F%2b6dEnGOHnypEjS48eP5VgR15CAzZs3w%2bVyrQ4DzGLG82dOqTBzf6pVSJcMHcFESbpz545I148fP36zAkx1dXU4deqUHI2VKMK85Yi/2bwZbWNxLM31VCuQLqejpbILBoO/MS9VCqlEzdYjWybkrcT%2bL3ZM/qu01PFWRQLsdjssFotw3OPxwOFwSJ0mKxqNJvFp1pgJ%2b/nzp9Ab5o2JJo22nf2sE5d9FH1%2bdSpQ0rCPmXDCeEw4DjU/10I4JcXQAzmTAEPEqKSovKjcaKqouUdHR1FUWITS0lJRhB8/fpSzSaVF5Xf79m0UFRVhcHBQTOWHDx9E8VVUVEjJsahIqdwKCgrEpNJisE14dXW1wEhHpVtaUoK7d%2b/ixYsXQkt9QGbklAHGwHRg%2bAWomKjBuSl%2bOZZtbW3o6OiQvm/fviX7af/bFIx03d3dAqcXyUwz19rait7eXsElbU1NjXiPhDPTYhDGsra2VuZobGwUR%2bjr168ikYbUrYofsJaSsaacK0HzRSZVu5vbmfoWwluIbqG8ktvmihiw9LwcGpWXMNdKN7/s6/ASOSabgLG4Xx0wLzMV71/HLcfHLmcMmE1hgh5TV%2bWIR5TU3BfTEYvrCIR1ZeIS0iY8ocyd7p9GQpnGVPr1yQDjyyciCI9/h6%2b7ErPaKPR5hTU8NYOmHjdsnphC0gUeGR6CraoC/q4OBdJXRfHmngFx5dgM1cPeVg5tvC3pBLVa7Wj4axKWYa8wgNiu1hZYiwvgbvmuGJdY/wwwFh/0TMDe9x29VgtisTh8ygPs7hlAh3UMFmsvQsrzCymPztrVhZGWJkSmfTlzq/8IA2bCUThccyGtEeW8OJ1OqRv3eJZGrGDKqVxrrEyzrxEG/Fp8NBJCyO8Sj5H%2bv0flUCgAzeuAFtAUzKeyB5rq9/g0pSz1pAJc/zpAjyFib0egvxaao39eB8TgV/pA66uGZvsbuuxUKUabD239Xow6ZzaCBMwvPB5EYKAOY82lgLdnziwqyxBRlmG8uQyzzvY5BqieIUcE1U2D6B4LIp7YEFZgzhOM%2byegu7vR2d6EaCwmTIhqdtgsNYiF3POh8yBa27sw6VHXZC2apF3/R4A%2b/fweosoCuFxOMYMEDQ6NJCM/jBkkEvE5F2pW3zhHQBigbLquJ5IBDlqBmPL2pqe9iITDEswwvMSEcoCoBDcWA%2bZvd8Z9nY8lg7Z%2bdE10YGRqSDHoV3%2b6mOOGYUCSEXocVocF5Y3lGHD1/hYM3bAM0EW0E3ObU0rBpTnQ57TCG3TLsU8XD1hTDFgsHpDubp4WL417u9Q7f7bxgZyGxDItwByeWugdIN1XXijEZcZPt/lspSZrCWCwkuHpTDjZPk8ZijE1pJ5aN5hhDngu9I9CTo8ALy0McTP0zUju58%2bfJVzN8DUjwYzasq%2bkpETgfCPkWyAfO4nPNiO9xCWcIXaOyUfSwsJCiSyTniFxtjk%2bo8Cc89OnTzIPQ%2b1fvnyRJ3O%2bI/K9kPMyPJ9zCWDJRxDabkoDn6cYk2ebjxa87LBNx4bl1NSUlAYeH1KIS1%2bAIXb2czw%2bhhhj8MGF/wEQl3X2EZ9tlsQjDdvj4%2bMikcQz3iJXRQes1fRHosLmh0uzPU/37485XL7YmIsp0%2bVGh/PwP0//APBPsSpOyda3AAAAAElFTkSuQmCC' /%3e%3c/svg%3e"}}},"context":{}}